#!/usr/bin/env python3
"""äº‰è®®æ€§å†…å®¹ - AI è¯¾ç¨‹å‰²éŸ­èœ"""

import sys
sys.path.insert(0, "/Users/apple/.openclaw/workspace/title-cover-generator")
from generate import create_title_cover

import requests

BASE_URL = "http://localhost:18060"

# äº‰è®®æ€§å†…å®¹ - ç»“åˆçƒ­ç‚¹
title = "AI åŸ¹è®­è¯¾ï¼Ÿå°±æ˜¯ç„¦è™‘ç¨"

content = """æ˜¨å¤©æœ‹å‹é—®æˆ‘ï¼Œè¦ä¸è¦èŠ± 3999 æŠ¥ä¸€ä¸ª AI å†™ä½œè¯¾ã€‚

æˆ‘å°±ç¬‘äº†ã€‚

è¿™ä¸ªè¯¾æ•™ä»€ä¹ˆï¼ŸChatGPT æç¤ºè¯ã€‚

ä½†ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œæç¤ºè¯è¿™ä¸œè¥¿ï¼Œéœ€è¦èŠ± 3999 å­¦å—ï¼Ÿ

ç½‘ä¸Šå…è´¹æ•™ç¨‹ä¸€å †ï¼Œå®˜æ–¹æ–‡æ¡£æ›´è¯¦ç»†ã€‚å‡­ä»€ä¹ˆå– 3999ï¼Ÿ

ç­”æ¡ˆå¾ˆç®€å•ï¼šå–çš„ä¸æ˜¯çŸ¥è¯†ï¼Œæ˜¯ç„¦è™‘ã€‚

"ä¸å­¦ AI å°±è¢«æ·˜æ±°"ï¼Œè¿™è¯ä½ å¬äº†å‡ ç™¾éå§ï¼Ÿ

ä½†çœŸç›¸æ˜¯ï¼š

1. æç¤ºè¯æ²¡æœ‰æŠ€æœ¯é—¨æ§›
2. æ ¸å¿ƒå°±é‚£å‡ ä¸ªæŠ€å·§
3. ç™¾åº¦å°±èƒ½æœåˆ°

é‚£ä¸ºä»€ä¹ˆè¿˜æœ‰äººä¹°ï¼Ÿ

å› ä¸ºç„¦è™‘çš„äººä¸ä¼šç™¾åº¦ã€‚

ä»–ä»¬åªæƒ³èŠ±é’±ä¹°å¿ƒå®‰ã€‚

æœ¬è´¨ä¸Šï¼Œè¿™å’Œå½“å¹´"ä¸å­¦ Python å°±è¢«æ·˜æ±°"ä¸€æ¨¡ä¸€æ ·ã€‚

å‰²å®Œä¸€èŒ¬åˆä¸€èŒ¬ã€‚

ä½ è¯´è¿™äº›è¯¾æœ‰æ²¡æœ‰ç”¨ï¼Ÿ

æœ‰ç”¨ã€‚å¸®ä½ çœäº†ç™¾åº¦çš„æ—¶é—´ã€‚

ä½†å€¼ 3999ï¼Ÿ

ä¸å€¼ã€‚

èŠ± 39 ä¹°æ¯å¥¶èŒ¶ï¼Œå‰©ä¸‹çš„å­˜èµ·æ¥ã€‚

è¿™æ‰æ˜¯å¯¹ AI ç„¦è™‘æœ€å¥½çš„å›åº”ã€‚

#AIåŸ¹è®­ #å‰²éŸ­èœ #ç„¦è™‘ç¨"""

print("=" * 60)
print("ğŸ¦€ äº‰è®®æ€§å†…å®¹ - AI è¯¾ç¨‹å‰²éŸ­èœ")
print("=" * 60)

# ç”Ÿæˆå°é¢
cover = create_title_cover(
    title=title,
    output_path="/tmp/cover.jpg",
    font_size=90
)

# å‘å¸ƒ
resp = requests.post(
    f"{BASE_URL}/api/v1/publish",
    json={"title": title, "content": content, "images": [cover]},
    timeout=120
)

result = resp.json()
if result.get("success"):
    print(f"\nâœ… å‘å¸ƒæˆåŠŸ: {result.get('data', {}).get('post_id')}")
else:
    print(f"\nâŒ å¤±è´¥: {result.get('error')}")
